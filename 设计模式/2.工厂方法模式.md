# 工厂方法模式

```工厂方法模式```是一种创建型设计模式， 其在父类中提供一个创建对象的方法， 允许子类决定实例化对象的类型。

> 工厂方法模式：定义一个用于创建对象的接口但是让子类决定将哪一个类实例化。工厂方法模式让一个类的实例化延迟到其子类

## 简单工厂方法

在说工厂方法之前，先引入简单工厂的概念。简单工厂方法不属于GOF的23种经典设计模式，这里简单说说。

现在有一个表情工厂，当用户需要某种表情时，他不需要关心表情是如何生成的，只需要告诉工厂他所需要的表情的名字就行，工厂根据参数的不同返回不同的产品，这就是简单工厂模式的动机。

![简单工厂2](./images/简单工厂2.png)

## 问题

现在需要在表情工厂中新增一个表情，如果使用简单工厂那么除了增加一个新的具体产品之外还需要修改工厂类的代码，使得整个设计**违反**了[开闭原则](/设计模式/1.SOLID原则.md#开闭原则)。

![简单工厂3](./images/简单工厂3.png)

## 解决办法

现在对该系统进行修改，不再提供一个表情工厂类来统一负责所有的表情的创建，而是将具体表情的创建过长交给专门的工厂子类去完成。先定义一个抽象表情工厂，再定义多个具体的工厂类来生产格子对应的表情，它们实现了在抽象按钮工厂类中声明的方法。这就是工厂方法模型，通过引入抽象工厂类，使他具备了代码的稳定性，和拓展性，符合了开闭原则。

![工厂方法模型](./images/工厂方法模型.png)

## 工厂方法模式结构

![工厂方法模式结构](./images/工厂方法模式结构.png)
